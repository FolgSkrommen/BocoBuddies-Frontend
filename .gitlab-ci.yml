stages: # List of stages for jobs, and their order of execution*
#    - lint
    - test
    - build

cache:
    paths:
        - /build

build-deploy-job:
    stage: build
    image: alpine:latest
    only:
        refs:
            - main
    script:
        - apk add --update npm
        - npm install
        - npm run build
        - mkdir .public
        - cp -r /builds/eivisha/to-do-list/dist/*
        - mv .public public
        - echo "Compile complete."

unit-test-job:
    stage: test
    image: alpine:latest
    only:
        refs:
            - main
    script:
        - apk add --update npm
        - npm install
        - npm run test:unit

#lint-job:
#    stage: lint
#    script:
#        - apk add --update npm
#        - npm install
#        - npm run prettier
